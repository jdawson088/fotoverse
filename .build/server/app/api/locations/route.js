(()=>{var e={};e.id=850,e.ids=[850],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77853:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>d,serverHooks:()=>x,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>v});var o={};r.r(o),r.d(o,{GET:()=>p,POST:()=>l,dynamic:()=>c});var a=r(96559),n=r(48088),s=r(37719),i=r(32190);let c="force-dynamic";async function u(){let{prisma:e}=await r.e(462).then(r.bind(r,7462));return e}async function p(e){try{if("phase-production-build"===process.env.NEXT_PHASE)return i.NextResponse.json({locations:[],pagination:{page:1,limit:12,total:0,pages:0}});let t=await u(),{searchParams:r}=new URL(e.url),o=r.get("search"),a=r.get("type"),n=r.get("vibe"),s=r.get("city"),c=r.get("minPrice"),p=r.get("maxPrice"),l=parseInt(r.get("page")||"1"),d=parseInt(r.get("limit")||"12"),g=(l-1)*d,v={isActive:!0};o&&(v.OR=[{title:{contains:o,mode:"insensitive"}},{description:{contains:o,mode:"insensitive"}},{city:{contains:o,mode:"insensitive"}}]),a&&(v.type=a),n&&(v.vibe=n),s&&(v.city={contains:s,mode:"insensitive"}),(c||p)&&(v.hourlyRate={},c&&(v.hourlyRate.gte=parseFloat(c)),p&&(v.hourlyRate.lte=parseFloat(p)));let[x,m]=await Promise.all([t.location.findMany({where:v,include:{owner:{select:{id:!0,name:!0,avatar:!0}}},orderBy:{createdAt:"desc"},skip:g,take:d}),t.location.count({where:v})]);return i.NextResponse.json({locations:x,pagination:{page:l,limit:d,total:m,pages:Math.ceil(m/d)}})}catch(e){return console.error("Locations fetch error:",e),i.NextResponse.json({error:"Failed to fetch locations"},{status:500})}}async function l(e){try{if("phase-production-build"===process.env.NEXT_PHASE)return i.NextResponse.json({error:"Not available during build"},{status:503});let t=await u(),r=await e.json(),o=await t.location.create({data:{...r,ownerId:"placeholder-user-id"},include:{owner:{select:{id:!0,name:!0,avatar:!0}}}});return i.NextResponse.json(o,{status:201})}catch(e){return console.error("Location creation error:",e),i.NextResponse.json({error:"Failed to create location"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/locations/route",pathname:"/api/locations",filename:"route",bundlePath:"app/api/locations/route"},resolvedPagePath:"/home/ubuntu/fotoverse/app/api/locations/route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:g,workUnitAsyncStorage:v,serverHooks:x}=d;function m(){return(0,s.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:v})}},78335:()=>{},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[447,580],()=>r(77853));module.exports=o})();