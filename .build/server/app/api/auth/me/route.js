"use strict";(()=>{var e={};e.id=788,e.ids=[788],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},6162:e=>{e.exports=require("stream")},1764:e=>{e.exports=require("util")},6873:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>y,requestAsyncStorage:()=>m,routeModule:()=>f,serverHooks:()=>v,staticGenerationAsyncStorage:()=>x});var n={};t.r(n),t.d(n,{GET:()=>h,dynamic:()=>d});var u=t(9303),o=t(8716),a=t(3131),s=t(7070),i=t(7452),p=t.n(i);async function c(){let{prisma:e}=await t.e(487).then(t.bind(t,9487));return e}async function l(e){try{if("phase-production-build"===process.env.NEXT_PHASE)return null;let r=await c(),t=function(e){let r=e.headers.get("authorization");if(r&&r.startsWith("Bearer "))return r.substring(7);let t=e.cookies.get("auth-token");return t?t.value:null}(e);if(!t)return null;let n=function(e){try{return p().verify(e,process.env.JWT_SECRET||"fallback-secret")}catch(e){return null}}(t);if(!n)return null;return await r.user.findUnique({where:{id:n.userId}})}catch(e){return console.error("Error getting current user:",e),null}}let d="force-dynamic";async function h(e){try{if("phase-production-build"===process.env.NEXT_PHASE)return s.NextResponse.json({error:"Not available during build"},{status:503});let r=await l(e);if(!r)return s.NextResponse.json({error:"Not authenticated"},{status:401});return s.NextResponse.json(r)}catch(e){return console.error("Auth check error:",e),s.NextResponse.json({error:"Internal server error"},{status:500})}}let f=new u.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/me/route",pathname:"/api/auth/me",filename:"route",bundlePath:"app/api/auth/me/route"},resolvedPagePath:"/home/ubuntu/fotoverse/app/app/api/auth/me/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:x,serverHooks:v}=f,g="/api/auth/me/route";function y(){return(0,a.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:x})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[276,972,452],()=>t(6873));module.exports=n})();