(()=>{var e={};e.id=660,e.ids=[660],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31594:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>d,serverHooks:()=>x,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>h});var s={};r.r(s),r.d(s,{GET:()=>l,POST:()=>p,dynamic:()=>c});var a=r(96559),n=r(48088),o=r(37719),i=r(32190);let c="force-dynamic";async function u(){let{prisma:e}=await r.e(462).then(r.bind(r,7462));return e}async function l(e){try{if("phase-production-build"===process.env.NEXT_PHASE)return i.NextResponse.json({challenges:[],pagination:{page:1,limit:12,total:0,pages:0}});let t=await u(),{searchParams:r}=new URL(e.url),s=r.get("category"),a=r.get("difficulty"),n=r.get("status"),o=parseInt(r.get("page")||"1"),c=parseInt(r.get("limit")||"12"),l=(o-1)*c,p={isActive:!0};s&&(p.category=s),a&&(p.difficulty=a),n&&(p.status=n);let[d,g]=await Promise.all([t.challenge.findMany({where:p,include:{creator:{select:{id:!0,name:!0,avatar:!0}},_count:{select:{submissions:!0}}},orderBy:{createdAt:"desc"},skip:l,take:c}),t.challenge.count({where:p})]);return i.NextResponse.json({challenges:d,pagination:{page:o,limit:c,total:g,pages:Math.ceil(g/c)}})}catch(e){return console.error("Challenges fetch error:",e),i.NextResponse.json({error:"Failed to fetch challenges"},{status:500})}}async function p(e){try{if("phase-production-build"===process.env.NEXT_PHASE)return i.NextResponse.json({error:"Not available during build"},{status:503});let t=await u(),r=await e.json(),s=await t.challenge.create({data:{...r,creatorId:"placeholder-user-id"},include:{creator:{select:{id:!0,name:!0,avatar:!0}},_count:{select:{submissions:!0}}}});return i.NextResponse.json(s,{status:201})}catch(e){return console.error("Challenge creation error:",e),i.NextResponse.json({error:"Failed to create challenge"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/challenges/route",pathname:"/api/challenges",filename:"route",bundlePath:"app/api/challenges/route"},resolvedPagePath:"/home/ubuntu/fotoverse/app/api/challenges/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:g,workUnitAsyncStorage:h,serverHooks:x}=d;function m(){return(0,o.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:h})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,580],()=>r(31594));module.exports=s})();